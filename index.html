<!doctype html>
<html lang="">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Schooltrui VSZ</title>
  <meta name="description" content="Schooltrui van de VSZ (Vrijeschool Zutphen), binnenkort hier te koop!">
  <link rel="icon" href="grijs-achterkant.png">

  <link rel="preconnect" href="https://cdn.jsdelivr.net">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">

  <!-- Open-Graph Meta Tags -->
  <meta property="og:description"
    content="Schooltrui van de VSZ (Vrijeschool Zutphen), binnenkort hier te koop!">
  <meta property="og:image" content="https://schooltrui.nl/open-graph.png">
  <meta property="og:title" content="Schooltrui VSZ">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://schooltrui.nl">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:description"
    content="Schooltrui van de VSZ (Vrijeschool Zutphen), binnenkort hier te koop!">
  <meta name="twitter:image" content="https://schooltrui.nl/open-graph.png">
  <meta name="twitter:title" content="Schooltrui VSZ">
  <meta property="twitter:domain" content="schooltrui.nl">
  <meta property="twitter:url" content="https://schooltrui.nl">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    integrity="sha256-rTpdO0HXBCNpreAHcu6tB2Ppg515Vo+5GtYSsnNLz+8=" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.24/dist/js/bulma-carousel.min.js"
    integrity="sha256-qKR77yzVBkDYKuoSg2BpAIbMtmF8aFjuTHFVnIjkpzI=" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma-carousel@4.0.24/dist/css/bulma-carousel.min.css"
    integrity="sha256-nVhrDZU/ne3I/z6LXWEbyUOEmv79sPGKEbsP7SWLkHI=" crossorigin="anonymous">
  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
</header>
<main class="hero is-medium container">
  <section class="hero-body columns">
    <div class="hero-image column is-half container has-text-centered carousel carousel-inactive">
      <figure class="item-0 image is-square"><img src="grijs-voorkant.png" alt="Schooltrui VSZ"></figure>
      <figure class="item-1 image"><img alt="Schooltrui VSZ" src="img/schooltrui-2.png"></figure>
      <figure class="item-2 image"><img alt="Schooltrui VSZ" src="img/schooltrui-3.png"></figure>
      <figure class="item-3 image"><img alt="Schooltrui VSZ" src="img/schooltrui-4.png"></figure>
      <figure class="item-4 image"><img alt="Schooltrui VSZ" src="img/schooltrui-5.png"></figure>
      <figure class="item-5 image"><img alt="Schooltrui VSZ" src="img/schooltrui-1.png"></figure>
    </div>

    <!-- @FIXME: Add Product RDFa for Search Engines -->
    <div class="hero-info column is-half container">
      <h1 class="title has-text-left is-1">Schooltrui VSZ</h1>
      <div>
        <p  class="has-text-left price is-size-4 mb-6">€24,99</p>
        <p class="mb-2">Hoe wil je de trui ontvangen?</p>
        <ul data-js="tags" class=" tags mb-5 ">
          <li class="tag is-medium is-rounded" data-link="pickup">Ophalen</li>
          <li class="tag is-medium is-rounded" data-link="send">Verzenden</li>
        </ul>
        <p class="buy-now mt-6">
          <a data-js="pay-link" class="button is-large is-fullwidth" href="#">Bestel nu</a>
        </p>
        <p class="mt-4">
          <!-- @TODO: Blurb content goes here (see https://github.com/Peachey-Schoorl/schooltrui-vsz/issues/6) -->
          Vul hieronder je email adres in om op de hoogte te blijven!
        </p>
      </div>
    </div>
  </section>
  <section class="container section box mb-6">
  <!-- @TODO: Other content goes here (see https://github.com/Peachey-Schoorl/schooltrui-vsz/issues/7) -->
    <iframe
      src="https://docs.google.com/forms/d/e/1FAIpQLScxXVXKS2eeiIdDE20BgIJub5Hco8TiH7oYRkqzmEWGSNoKKA/viewform?embedded=true"
      width="640" height="500" frameborder="0" marginheight="0" marginwidth="0">Loading…
    </iframe>
  </section>
</main>
<script>
  function handleTagEvent(event) {
    if (event.target !== event.currentTarget) {
      const isActive = event.target.classList.contains('is-active')
      event.currentTarget.querySelectorAll('.tag').forEach(element => element.classList.remove('is-active'))

      if (isActive === false) {
        event.target.classList.add('is-active')
      }
    }
  }

  const payLinks = {
  /* HIER KUN JE DE LINKS UIT STRIPE AANPASSEN
   * De naam, bijvoorbeeld "send" of "pickup", laten staan anders gaat het stuk!
   * Tussen de haakjes '' de link invullen, bijvoorbeeld: 'https://buy.stripe.com/live_a1b2c3d4e5f6g7h8j9'
   */
    send: 'https://buy.stripe.com/test_dR617X5dI7tj29a5kk?locale=nl',
    pickup: 'https://buy.stripe.com/test_00g03TgWqbJzg007st?locale=nl'
  }

  const payLink = document.querySelector('[data-js="pay-link"]')

  document.querySelector('[data-js="tags"]').addEventListener('click', handleTagEvent)

  function attachCarousel(selector) {
    const carousel = bulmaCarousel.attach(selector, {
      "autoplay": false, // Autoplay carousel
      "autoplaySpeed": 3000, // Time between each transition when autoplay is active (ms)
      "duration": 300, // Transition animation duration (in ms)
      "effect": "translate", // Animation effect for item transition (translate|fade)
      "infinite": true, // Activate infinite display mode
      "initialSlide": 0, //Initial item index
      "loop": false, // Activate loop display mode
      "navigation": true, // Display navigation buttons
      "navigationKeys": true, // Enable navigation with arrow keys
      "navigationSwipe": true, // Enable swipe navigation
      "pagination": true, // Display pagination bullets
      "pauseOnHover": true, // Stop autoplay when cursor hover carousel
      "slidesToScroll": 1, // Slide to scroll on each step
      "slidesToShow": 1, // Slides to show at a time
      "timing": "ease", // Transiation animation type
    })

    window.addEventListener('resize', () => {
      carousel[0].reset();
    })
  }

  const searchParams = new URLSearchParams(document.location.search);

  payLink.addEventListener('click', (event) => {
    event.preventDefault();
    // get send or pickup
    const tag = document.querySelector('[data-js="tags"] .is-active')

    if (! tag) {
      alert('Je moet kiezen of je de trui wilt ophalen of laten verzenden!')
    } else {
      const link = payLinks[tag.dataset.link]
      document.location = link
    }
  })

  attachCarousel('.carousel')
</script>
</body>
</html>
